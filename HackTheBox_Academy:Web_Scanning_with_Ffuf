# HTB Academy 

ROOM: Attacking Web Application with ffuf 


Final Part 

----------------------------
Skill Assessment 
----------------------------

Qustion 1:  Run a sub-domain/vhost fuzzing scan on 'academy.htb' for the IP shown above. What are all the vhosts you can identify?
Ans: archive faculty test

# use this command to get the vhost #Note add the DNS entry first in /etc/host file and filter out the repose with the size 
$ ffuf -w wordlist.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb' -fs xxx

Question 2: Before you run your page fuzzing scan, you should first run an extension fuzzing scan. What are the different extensions accepted by the domains?
Ans: .php .php7 .phps
# use the following command to get the valid extension
$ ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/indexFUZZ 

Question 3: One of the pages you will identify should say 'You don't have access!'. What is the full page URL?
Ans: http://faculty.academy.htb:PORT/courses/linux-security.php7
# use the following syntx to get the above result as you find all the valid extension so try all the extension and you find that page 
$ ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v

Question 4:  In the page from the previous question, you should be able to find multiple parameters that are accepted by the page. What are they?
Ans: user username
# use this command to get that parameters.use the valid fillters to get the result 
$ ffuf -w wordlist.txt:FUZZ -u http://admin.academy.htb:PORT/cources/linux-security?FUZZ=key -fs xxx 

Question 5:  Try fuzzing the parameters you identified for working values. One of them should return a flag. What is the content of the flag?
Ans: HTB{w3b_fuzz1n6_m4573r}
 
common subdirectory found  " /courses "
this subdirectry found on "archive" & "faculty"  subdomains

==========================

The faculty subdirectry have the page "linux-security.php7" that shows msg you dont have permission

===============================


By doing parameter fuzzing using GET method found "user" parameter but when go to the followind link 

http://faculty.academy.htb:PORT/courses/linux-security.php7?user=key

They show msg "this method is no loger use" so we have to do this using post method so by doing doing this found two parameters "user and username" now enter this parameter in the link like 

http://faculty.academy.htb:PORT/courses/linux-security.php7?username=key

They show msg "You don't have access!"

=====================================
As far i found parameter 'username' but for get the flag we also have the one more parameter for this 

In Seclist there is alot of username wordlist availible so by using the following wordlist i found the three username parameter 

WORDLIST = 'SecLists/Usernames/xato-net-10-million-usernames-dup.txt'
 
 Found user parameter = 'harry', 'Harry', 'HARRY'

so by sending POST request to all of the user parameter one of them give me the flag 

Command for the post request is following:
============================================================================================================================
curl -X POST -d 'username={user parameter place here}' http://faculty.academy.htb:{port no here}/courses/linux-security.php7
============================================================================================================================

======>     The valid username parameter is third one 'HARRY'



HTB CheateSheet
===============

Wordlist using 
------------------
Seclist

SecLists/Discovery/Web-Content/directory-list-2.3-small.txt                                                                    | Directory/Page Wordlist |

SecLists/Discovery/Web-Content/web-extensions.txt                                                                              | Extensions Wordlist     |

SecLists/Discovery/DNS/subdomains-top1million-5000.txt                                                                         | Domain Wordlist         |

SecLists/Discovery/Web-Content/burp-parameter-names.txt                                                                        | parameters wordlist     |
---------------------------------------------------------------------------------------------------------

Commands 
--------
ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ                                                                          | Directory Fuzzing |

ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/indexFUZZ                                                                     | Extension Fuzzing |

ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/blog/FUZZ.php                                                                 | Page Fuzzing      |

ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v                                 | Recursive Fuzzing |

ffuf -w wordlist.txt:FUZZ -u https://FUZZ.hackthebox.eu                                                                          |Sub-domain Fuzzing |

ffuf -w wordlist.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb' -fs xxx                                                                                                  | VHost Fuzzing     |

ffuf -w wordlist.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php?FUZZ=key -fs xxx                                                                                          | Parameter Fuzzing - GET |

ffuf -w wordlist.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'FUZZ=key' -H 'Content-Type: application/x-www-form-urlencoded' -fs xxx                       | Parameter Fuzzing - POST |

ffuf -w ids.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=FUZZ' -H 'Content-Type: application/x-www-form-urlencoded' -fs xxx`                                       |  Value Fuzzing |

=========================================================================================================

Misc Commands
-------------
sudo sh -c 'echo "SERVER_IP  academy.htb" >> /etc/hosts'`                            | Add DNS entry |

for i in $(seq 1 1000); do echo $i >> ids.txt; done`                      | Create Sequence Wordlist |

curl http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=key' -H 'Content-Type: application/x-www-form-urlencoded'`                                                         | curl w/ POST |
==========================================================================================================
